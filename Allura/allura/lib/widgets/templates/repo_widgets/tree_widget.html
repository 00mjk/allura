<table>
{% set ls = list(tree.ls()) %}
  <thead>
    <tr>
      <th>Kind</th>
      <th>File</th>
      <th>Date</th>
      <th>Author</th>
      <th>Commit</th>
    </tr>
  </thead>
  <tbody>
    {% if tree._parent %}
    <tr>
      <td></td>
      <td><a href="..">[Up one dir]</a></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    {% endif %}
   {% if not ls %}
      <td colspan="5">&mdash; No files &mdash;</td>
   {% endif %}
    {% for dirent in tree.ls() %}
    <tr>
      <td>{{dirent.kind}}</td>
      <td><a href="{{h.really_unicode(dirent.href)}}">{{h.really_unicode(dirent.name)}}</a></td>
        <td>{{h.ago(dirent.last_commit.date)}}</td>
        <td>{{dirent.last_commit.author}}</td>
        <td>
          <a href="{{dirent.last_commit.href}}">{{dirent.last_commit.shortlink}}</a>
        </td>

      {% if dirent.date %}
        <td>{{h.ago(dirent.date)}}</td>
      {% else %}
        <td></td>
      {% endif %}
      <td>{{dirent.last_author|escape}}</td>
      <td>
      {% if dirent.commit %}
        <a href="{{dirent.commit.url()}}">
          {{h.text.truncate(dirent.commit._id|string, 10)}}
        </a>
      {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
