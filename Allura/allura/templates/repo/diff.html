{% extends 'jinja_master/master.html' %}
{% do g.register_forge_css('css/forge/hilite.css') %}

{% block title %}
  {{c.project.name}} / {{c.app.config.options.mount_label}} / Diff of {{h.really_unicode(a.filename)}}
{% endblock %}

{% block header %}Diff of {{h.really_unicode(a.path())}}{% endblock %}

{% block content %}

  <a href="{{a.commit.url()}}">{{h.text.truncate(a.commit.object_id, 10)}}:</a>
  <a href="{{a.url()}}">{{a.path()}}</a><br/>
  vs.<br/>
  <a href="{{b.commit.url()}}">{{h.text.truncate(b.commit.object_id, 10)}}:</a>
  <a href="{{b.url()}}">{{b.path()}}</a>


  {% if (not a.has_html_view and not a.has_image_view) or (not b.has_html_view and not b.has_image_view) %}
    {{a.name}} cannot be displayed in your browser.
    You may, however, <a href="?format=raw">download this file</a> instead.
  {% endif %}
  {% if a.has_html_view and b.has_html_view %}
  <div class="clip">
    <h3><span class="ico-l"><b class="ui-icon ui-icon-document"></b> {{h.really_unicode(a.filename)}}</span></h3>
    {{g.highlight(diff, lexer='diff')}}
  </div>
  {% endif %}
  {% if a.has_image_view and b.has_image_view %}
  <div>
    <img src="{{a.url()}}?format=raw"
         alt="{{h.text.truncate(a._commit._id, 10)}}"
         title="{{h.text.truncate(a._commit._id, 10)}}"/>
    <img src="{{b.url()}}?format=raw"
         alt="{{h.text.truncate(b._commit._id, 10)}}"
         title="{{h.text.truncate(b._commit._id, 10)}}"/>
  </div>
  {% endif %}
{% endblock %}
