<form method="GET" action=".">
  <div class="grid-10">
    <input type="text" name="q" value="{{q}}" class="search-query" title="Search App"/>
  </div>
  <div class="grid-3">
    <input type="submit" value="Search">
  </div>
  <div class="grid-6">
    <a href="#" class="btn search_help_modal">
      <b data-icon="{{g.icons['help'].char}}" class="ico {{g.icons['help'].css}}"></b>
      Help
    </a>
  </div>
  <div class="grid-10">
    {% set search_project = request.GET['project'] == '1' %}
    <input type="radio" name="project" value="0" id="search-app" {% if not search_project %}checked{% endif %}>
    <label for="search-app">Search {{c.app.config.options.mount_point or 'app'}}</label>
    <input type="radio" name="project" value="1" id="search-project" {% if search_project %}checked{% endif %}>
    <label for="search-project">Search entire project</label>
  </div>
  <div class="grid-9">
    {% if not search_comments_disable %}
      <label for="search-comments">Search comments?</label>
      <input id="search-comments" type="checkbox" name="search_comments"{% if search_comments %} checked{% endif %}>
    {% endif %}
    <label for="search-history">Search history?</label>
    <input id="search-history" type="checkbox" name="history"{% if history %} checked{% endif %}>
  </div>
</form>
<div style="clear:both">&nbsp;</div>
{% if search_error %}
<div class="grid-19">{{ search_error }}</div>
{% endif %}
<div class="grid-19">
  {{widget.fields['page_list'].display(limit=limit, page=page, count=count)}}
</div>
{% for doc in results %}
  <div class="grid-19">
    {# TODO: mark matches in title and snippet #}
    <p>
    <a href="{{doc['url_paginated'] or doc['url_s']}}">{{ doc.title_s }}</a><br>
    {{ doc.snippet }}
    TODO: change me to something useful! Mark <strong>matches</strong>.<br/>
    an open source implementation of a software "forge", <strong>a web site</strong> that manages source code repositories, bug reports, discussions, mailing lists, wiki pages, blogs and more for any number of individual proje<br>
    <span class="date">Last updated: {{ h.ago_string(doc['mod_date_dt']) }}</span>
    </p>
  </div>
{% endfor %}
<div class="grid-19">
  {{widget.fields['page_list'].display(limit=limit, page=page, count=count)}}
  {{widget.fields['page_size'].display(limit=limit, count=count)}}
</div>
<div class="grid-19" style="clear:both">
  {# TODO: highlight active sorting order #}
  <p>Sort by <a href="#"><strong>relevance</strong></a> or <a href="#">date</a></p>
</div>
