{% from 'allura:templates/jinja_master/lib.html' import email_gravatar, abbr_date with context %}
<p>
{% if value.author_url %}
  Authored by
  <a href="{{value.author_url}}">{{email_gravatar(value.authored.email, title=h.really_unicode(value.authored.name), size=16)}}</a>
  <a href="{{value.author_url}}">{{h.really_unicode(value.authored.name)}}</a>
{% else %}
  Authored by
  {{email_gravatar(value.authored.email, title=h.really_unicode(value.authored.name), size=16)}} {{h.really_unicode(value.authored.name)}}
{% endif %}
{% if value.authored.date %}{{abbr_date(value.authored.date)}}{% endif %}
{% if value.committed.email != value.authored.email %}
  {% if value.committer_url %}
    Committed by
    <a href="{{value.committer_url}}">{{email_gravatar(value.committed.email, title=h.really_unicode(value.committed.name), size=16)}}</a>
    <a href="{{value.committer_url}}">{{h.really_unicode(value.committed.name)}}</a>
  {% else %}
    Committed by
    {{email_gravatar(value.committed.email, title=h.really_unicode(value.committed.name), size=16)}} {{h.really_unicode(value.committed.name)}}
  {% endif %}
  {% if value.committed.date %}{{abbr_date(value.committed.date)}}{% endif %}
{% endif %}
</p>

<p><a href="{{value.url()}}tree/">Tree</a></p>
{% if prev %}
<p>
  Parent(s):
  {% for ci in prev %}<a href="{{ci.url()}}">{{ci.shorthand_id()}}</a>{% endfor %}
</p>
{% endif %}
{% if next %}
<p>
  Child(ren):
  {% for ci in next %}<a href="{{ci.url()}}">{{ci.shorthand_id()}}</a>{% endfor %}
</p>
{% endif %}
{{g.markdown.convert(h.really_unicode(value.message))}}
